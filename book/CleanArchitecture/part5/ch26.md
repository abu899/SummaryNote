# 26장. 메인 컴포넌트

모든 시스템에는 최소 하나의 컴포넌트가 존재하며, 이 컴포넌트가 나머지 컴포넌트를 생성하고 조정하며 관리한다.
이 컴포넌트를 `메인 컴포넌트`라고 한다.

## 궁극적인 세부사항

메인 컴포넌트는궁극적인 세부사항으로 가장 낮은 수준의 정책이며 초기 진입점이다.
운영체제를 제외하고는 어떤 것도 메인에 의존하지 않으며, 시스템에서 더 높은 수준을 담당하는 부분으로 제어권을 넘기는 역할을 맡는다.

의존성 주입 프레임워크를 이용해 의존성을 주입하는 역할이 메인 컴포넌트에서 이뤄져야하는 일이다.
일단 메인에 의존성이 주입되고 나면, 다른 컴포넌트에의존성을 분배할 수 있어야한다.

메인에서는 다양한 함수들이 호출될 수 있지만, 명령을 실제로 처리하는 일은 다른 고수준 컴포넌트로 위임한다는 사실에 주목해야한다.

메인은 클린 아키텍쳐에서 가장 바깥 원에 위치하는 지저분한 저수준 모듈이다.
즉, 고수준의 시스템을 위한 모든 것을 로드한 후 제어권을 고수준의 시스템에게 넘긴다.

## 결론

- 메인을 어플리케이션의 플러그인이라고 생각하자
  - 초기 조건과 설정을 구성하고, 외부 자원을 모두 수집, 제어권을 어플리케이션의 고수준 정책으로 넘기는 플러그인
- 플러그인이므로 어플리케이션의 설정별로 하나씩 둘 수 있음
  - 개발용, 테스트용, 배포용 등
- 메인을 플러그인으로 여기고 아키텍쳐 가장 바깥에 위치한다고 보면 설정 문제를 쉽게 해결할 수 있다.
