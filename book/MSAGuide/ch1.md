# 1장. 마이크로서비스 아키텍쳐란?

## 1.1 일반적인 정의

> MSA는 시스템을 독립적으로 배포할 수 있는 서비스들로 구성하고 각 서비스는 잘 정의된 API로 통신한다.

MSA가 제공하는 장점은 다양하다.

- 서비스 단위로 변경하고 독립적으로 배포할 수 있다
- API로 기능을 재사용하고 조합하여 신규 기능을 만들 수 있다
- 아키텍쳐를 조직 구조에 맞게 정렬할 수 있다
- 서비스 단위로 스케일 아웃 할 수 있다
- 서비스의 장애가 다른 서비스에 퍼지는 것을 차단해 대형 장애를 방지할 수 있다
- 서비스별 다른 기술을 사용할 수 있으므로, 신규 기술을 적용하기 쉽다

## 1.2 정확하게 무엇인가?

### 1.2.1 유래

MSA의 형성과정을 살펴보면 어떤 개인이나 단체가 정의한 것이 아니다. 2010년 전후로 유사한 아키텍쳐를 가진 시스템이 생겨나고 있었다.
2011년에 일부 아키텍트가 모여 자신들이 탐구하던 아키텍쳐 스타일에 대해 이름을 붙였고 이후 여러 사람에게 불리며 널리퍼지게 되었다.
이처럼 MSA는 `자생적으로 생겨난 것이기 때문에 구체적인 정의가 없는 것`은 자연스러운 일이다.

또한 `MSA는 적용하는 목표가 명확하지 않다`. 서로 다른 배경을 가진 시스템들의 기술적인 특징을 모아 정리하다 보니 목표가 다양하고 장황하다.

가장 혼란스러운 점은 `아키텍쳐의 기준이 없다는 것`이다. 예를 들어 서비스 크기가 얼마나 되어야 마이크로인가에 대한 명확한 기준이 없다.
서비스 담당자가 한 명? 한 팀당 하나의 서비스? 이런 기준이 없다.

### 1.2.2 협의의 정의

먼저 기타 아키텍쳐 스타일이 아닌 MSA를 선택해야만 하는 이유가 무엇인지를 인지하고 MSA의 어떤 특징이 어떤 장점을 불러일으키는지를 이해해야 한다.

#### MSA의 장점

기존 아키텍쳐로는 해결하기 어렵기 때문에 MSA를 선택하게 하는 이유가 진정한 장점이라고 볼 수 있다

1. 시스템을 빠르게 변경할 수 있다

- 각 서비스를 담당하는 팀이 독립적으로 기획, 개발, 배포하여 다른 팀과 협업하거나 일정을 조율할 필요없이 빠른 시스템 변경이 가능하다

2. 독립적인 배포가 가능하다

- 모놀리식 아키텍쳐에 강한 모듈화를 적용해도 다른 모듈에 영향을 주는 부분을 대부분 차단할 수 있다
- 하지만, 독립적으로 배포한다는 점은 업무 단위로 별로 시스템을 배포할 수 있기 때문에 MSA만의 진정한 장점

3. 업무 단위로 장애를 차단하고 확장할 수 있다

- 장애에 민감한 업무는 다른 업무로부터 분리하여 보호하고, 다른 업무는 장애에 대한 부담을 덜어 쉽게 변경할 수 있다

이처럼 MSA는 `독립적으로 배포하여 시스템 변경 속도를 더 빠르게` 해야하거나 `업무 단위로 장애 차단 또는 시스템을 확장할 필요`가 있는 시스템에
적합하다.


#### MSA의 장점을 살리는 특징

1. 각 서비스는 비지니스 기능 단위로 나누어야 한다

- 서비스하는 팀이 협업 부서에 요청할 필요가 없기 때문
- 비지니스 기능은 서비스 내부에서 시스템을 변경하는 단위로 대부분의 변경이 이뤄져야 한다

2. 각 서비스 간에 임의적인 접근이 불가능하도록 격리해야 한다

- 다른 서비스가 임의의 코드를 참조할 수 없도록 소스를 분리하고 정해진 인터페이스로만 접근해야 한다

3. 서비스는 독립적으로 실행되고 API로 통신한다

- 각 서비스 간에 데이터를 조회하거나 트랜잭션을 발생시켜야 하는 경우 REST API나 이벤트로 통신

4. 각 서비스는 독립적으로 개발하고 배포해야 한다

- 서비스별로 독립된 팀이 자체적으로 세운 일정에 따라 개발, 배포

즉, MSA를 제대로 적용한 시스템은 서비스가 업무 단위로 분리되어 서로 정해진 인터페이스로만 통신하고, 독립적으로 실행하며 독립적으로 배포된다.
