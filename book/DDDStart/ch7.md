# 도메인 서비스

## 여러 애그리거트가 필요한 기능

한 애그리거트로 기능을 구현할 수 없을 떄가 있다.
이럴 때는 한 애그리거트에 넣기 애매한 도메인 기능을, 특정 애그리거트에 모두 구현하는 것은 좋지 않다.
`자신의 책임 범위를 넘어서는 기능을 구현`하기에 외부에 대한 의존이 높아지게 되며 코드를 복잡하게 만들어
수정을 어렵게 만들 수 있다.

이럴 때는 도메인 서비스를 사용해 도메인 기능을 별도의 서비스로 구현할 수 있다.

## 도메인 서비스

도메인 서비스는 도메인 영역에 위치한 도메인 로직을 표현할 때 사용한다.

- 여러 애그리거트가 필요한 로직이나, 한 애그리거트에 넣기에 복잡한 계산 로직
- 외부 시스템 연동이 필요한 도메인 로직

### 계산 로직과 도메인 로직

도메인 서비스는 도메인과 달리 상태없이 로직만 구현하며 두가지 방식으로 구현할 수 있다.

- 응용 서비스가 애그리거트 객체에 도메인 서비스를 전달하여 사용하는 방식
- 도메인 서비스의 기능을 실행할 때 애그리거트를 전달하는 방식

여기서 중요한 것은 도메인 서비스는 응용 로직이 아닌 반드시 `도메인 로직을 수행`한다는 것이다.
특정 기능이 응용 서비스인지 도메인 서비스인지 판단하기 어려울 때는 해당 로직이
애그리거트의 `상태를 변경하거나 상태 값을 계산`하는지 판단해보자. 이런 경우 도메인 서비스이다.

### 외부 시스템 연동과 도메인 서비스

외부 시스템이나 타 도메인과의 연동 기능도 도메인 서비스가 될 수 있다.

특히 도메인 로직을 외부 시스템이나 별도 엔진을 이용해 구현하는 경우는 인터페이스와 클래스를
분리하여 특정 구현 기술에 의존하지 않게 하는 것이 좋다.
